@{
    ViewData["Title"] = "個人資料";
}

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow-lg">
            <div class="card-header bg-gradient bg-primary text-white">
                <h3 class="mb-0">
                    <i class="fas fa-user-circle me-2"></i>個人資料
                </h3>
            </div>
            <div class="card-body p-4">
                <div class="row">
                    <div class="col-md-4 text-center">
                        <div class="profile-avatar mb-4">
                            <i class="fas fa-user-circle fa-8x text-primary"></i>
                        </div>
                        <h4 class="text-primary">@ViewBag.UserName</h4>
                        <p class="text-muted">
                            @if (ViewBag.UserRole == "Admin")
                            {
                                <span class="badge bg-danger fs-6">管理員</span>
                            }
                            else
                            {
                                <span class="badge bg-success fs-6">一般用戶</span>
                            }
                        </p>
                    </div>
                    <div class="col-md-8">
                        <h5 class="border-bottom pb-2">
                            <i class="fas fa-info-circle text-info me-2"></i>基本資訊
                        </h5>
                        <div class="row mb-3">
                            <div class="col-sm-4">
                                <strong>使用者名稱:</strong>
                            </div>
                            <div class="col-sm-8">
                                <span class="badge bg-light text-dark">@ViewBag.UserName</span>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-4">
                                <strong>電子郵件:</strong>
                            </div>
                            <div class="col-sm-8">
                                <span class="badge bg-light text-dark">@ViewBag.UserEmail</span>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-4">
                                <strong>帳戶角色:</strong>
                            </div>
                            <div class="col-sm-8">
                                @if (ViewBag.UserRole == "Admin")
                                {
                                    <span class="badge bg-danger">系統管理員</span>
                                }
                                else
                                {
                                    <span class="badge bg-success">一般用戶</span>
                                }
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-4">
                                <strong>帳戶狀態:</strong>
                            </div>
                            <div class="col-sm-8">
                                <span class="badge bg-success">
                                    <i class="fas fa-check-circle me-1"></i>已啟用
                                </span>
                            </div>
                        </div>
                        
                        <h5 class="border-bottom pb-2 mt-4">
                            <i class="fas fa-shield-alt text-success me-2"></i>安全設定
                        </h5>
                        <div class="row mb-3">
                            <div class="col-sm-4">
                                <strong>密碼加密:</strong>
                            </div>
                            <div class="col-sm-8">
                                <span class="badge bg-success">
                                    <i class="fas fa-lock me-1"></i>BCrypt 雜湊
                                </span>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-4">
                                <strong>JWT 認證:</strong>
                            </div>
                            <div class="col-sm-8">
                                <span class="badge bg-info">
                                    <i class="fas fa-key me-1"></i>已啟用
                                </span>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-4">
                                <strong>HTTPS 連線:</strong>
                            </div>
                            <div class="col-sm-8">
                                <span class="badge bg-primary">
                                    <i class="fas fa-shield-alt me-1"></i>安全連線
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <hr class="my-4">
                
                <div class="row">
                    <div class="col-12">
                        <h5 class="border-bottom pb-2">
                            <i class="fas fa-tools text-warning me-2"></i>帳戶操作
                        </h5>
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn btn-outline-primary" onclick="showChangePasswordModal()">
                                <i class="fas fa-key me-2"></i>更改密碼
                            </button>
                            <button class="btn btn-outline-info" onclick="showSecurityLog()">
                                <i class="fas fa-history me-2"></i>登入記錄
                            </button>
                            @if (ViewBag.UserRole == "Admin")
                            {
                                <a href="@Url.Action("Dashboard", "Admin")" class="btn btn-outline-danger">
                                    <i class="fas fa-tachometer-alt me-2"></i>管理員面板
                                </a>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 帳戶活動摘要 -->
        <div class="card shadow mt-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="fas fa-chart-bar me-2"></i>帳戶活動
                </h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3">
                        <div class="p-3">
                            <i class="fas fa-sign-in-alt fa-2x text-primary mb-2"></i>
                            <h6>本月登入</h6>
                            <span class="badge bg-primary fs-6" id="loginCount">-</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="p-3">
                            <i class="fas fa-clock fa-2x text-success mb-2"></i>
                            <h6>線上時間</h6>
                            <span class="badge bg-success fs-6" id="onlineTime">-</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="p-3">
                            <i class="fas fa-shield-check fa-2x text-info mb-2"></i>
                            <h6>安全分數</h6>
                            <span class="badge bg-info fs-6">95/100</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="p-3">
                            <i class="fas fa-user-check fa-2x text-warning mb-2"></i>
                            <h6>帳戶等級</h6>
                            <span class="badge bg-warning fs-6">標準</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 更改密碼 Modal -->
<div class="modal fade" id="changePasswordModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title">
                    <i class="fas fa-key me-2"></i>更改密碼
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label class="form-label">目前密碼</label>
                        <input type="password" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">新密碼</label>
                        <input type="password" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">確認新密碼</label>
                        <input type="password" class="form-control" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-warning">更新密碼</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function showChangePasswordModal() {
            $('#changePasswordModal').modal('show');
        }
        
        function showSecurityLog() {
            alert('登入記錄功能開發中...');
        }
        
        // 模擬載入活動數據
        $(document).ready(function() {
            setTimeout(function() {
                $('#loginCount').text('12次');
                $('#onlineTime').text('24.5小時');
            }, 1000);
        });
    </script>
}
